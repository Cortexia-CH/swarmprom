version: '3.7'

services:
  grafana:
    labels:
      - "traefik.enable=true"
      - "traefik.docker.network=${TRAEFIK_PUBLIC_NETWORK}"
      - "traefik.http.routers.grafana.entrypoints=websecure"
      - "traefik.http.routers.grafana.tls.certresolver=cloudflare"
      - "traefik.http.routers.grafana.rule=Host(`grafana.${DOMAIN}`)"

  alertmanager:
    labels:
      - "traefik.enable=true"
      - "traefik.docker.network=${TRAEFIK_PUBLIC_NETWORK}"
      - "traefik.http.routers.alertmanager.entrypoints=websecure"
      - "traefik.http.routers.alertmanager.tls.certresolver=cloudflare"
      - "traefik.http.routers.alertmanager.rule=Host(`alertmanager.${DOMAIN}`)"

  unsee:
    labels:
      - "traefik.enable=true"
      - "traefik.docker.network=${TRAEFIK_PUBLIC_NETWORK}"
      - "traefik.http.routers.unsee.entrypoints=websecure"
      - "traefik.http.routers.unsee.tls.certresolver=cloudflare"
      - "traefik.http.routers.unsee.rule=Host(`unsee.${DOMAIN}`)"

  prometheus:
    labels:
      - "traefik.enable=true"
      - "traefik.docker.network=${TRAEFIK_PUBLIC_NETWORK}"
      - "traefik.http.routers.prometheus.entrypoints=websecure"
      - "traefik.http.routers.prometheus.tls.certresolver=cloudflare"
      - "traefik.http.routers.prometheus.rule=Host(`prometheus.${DOMAIN}`)"
